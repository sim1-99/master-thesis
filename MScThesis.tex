\documentclass{mimosis}

\usepackage{metalogo}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Some of my favourite personal adjustments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% These are the adjustments that I consider necessary for typesetting
% a nice thesis. However, they are *not* included in the template, as
% I do not want to force you to use them.

% This ensures that I am able to typeset bold font in table while still aligning the numbers
% correctly.
\usepackage{etoolbox}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Hyperlinks & bookmarks
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{hyperref}

\hypersetup{
  hidelinks,
  linktoc    = page,
  colorlinks = true,
  citecolor  = RoyalBlue,
  linkcolor  = RoyalBlue,
  urlcolor   = RoyalBlue,
  unicode = true, % for non-Latin characters in Acrobat’s bookmarks
  %bookmarks=true,  % show bookmarks bar?
  pdftoolbar=false,  % show Acrobat’s toolbar?
  pdfmenubar=true,  % show Acrobat’s menu?
  pdffitwindow=true,  % window fit to page when opened
  pdfstartview={FitH},  % fits the width of the page to the window
  pdfpagelayout={SinglePage},  % set visualization on single page
  pdftitle={Segmentation and Biometry Estimation of 3D T2w Fetal Brain Images},  % title
  pdfauthor={Simone Chiarella},  % author
  pdfsubject={Fetal Brain MRI Segmentation},  % subject of the document
  pdfcreator={Simone Chiarella},  % creator of the document
  pdfproducer={Latekmk},  % producer of the document
  %pdfkeywords={keyword1, key2, key3}, % list of keywords
  pdfnewwindow=false,  % links in new PDF window
}

% >>> Make the page number in the table of contents a hyperlink
\usepackage{lipsum}
\makeatletter
\def\numberline#1{%
  \ifx\Hy@tocdestname\ltx@empty
    \hb@xt@\@tempdima{#1\hfill}%
  \else
  \hb@xt@\@tempdima{
    \hyper@linkstart{link}{\Hy@tocdestname}#1\hyper@linkend\hfill
  }%
 \fi
}
\makeatother
% <<<
\usepackage{bookmark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Bibliography
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% I like the bibliography to be extremely plain, showing only a numeric
% identifier and citing everything in simple brackets. The first names,
% if present, will be initialized. DOIs and URLs will be preserved.

\usepackage[%
  autocite     = plain,
  backend      = biber,
  doi          = true,
  url          = true,
  giveninits   = true,
  hyperref     = true,
  maxbibnames  = 99,
  maxcitenames = 99,
  sortcites    = true,
  style        = numeric,
]{biblatex}

\input{latex-mimosis/bibliography-mimosis}
\addbibresource{sources/bibliography.bib}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Fonts
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ifxetexorluatex
  \usepackage{unicode-math}
  \setmainfont{EB Garamond}
  \setmathfont{Garamond Math}

  % Load some missing symbols from another font.
  \setmathfont{STIX Two Math}[%
    range = {
      \sharp,
      \natural,
      \flat,
      \clubsuit,
      \spadesuit,
      \checkmark,
    }
  ]
  \setmonofont[Scale=MatchLowercase]{Source Code Pro}
\else
  % >>> charter
  %\usepackage[bitstream-charter]{mathdesign}
  %\usepackage[scaled=0.92]{helvet}
  %\usepackage{courier}
  % <<<
  \usepackage[lf]{libertinus-type1}  % ebgaramond
  \usepackage[oldstyle,scale=0.7]{sourcecodepro}
  \singlespacing
\fi

\newacronym[description={Principal component analysis}]{PCA}{PCA}{principal component analysis}
\newacronym                                            {SNF}{SNF}{Smith normal form}
\newacronym[description={Topological data analysis}]   {TDA}{TDA}{topological data analysis}

\newglossaryentry{LaTeX}{%
  name        = {\LaTeX},
  description = {A document preparation system},
  sort        = {LaTeX},
}

\newglossaryentry{Real numbers}{%
  name        = {$\real$},
  description = {The set of real numbers},
  sort        = {Real numbers},
}

\makeindex
\makeglossaries

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Ordinals
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\makeatletter
\@ifundefined{st}{%
  \newcommand{\st}{\textsuperscript{\textup{st}}\xspace}
}{}
\@ifundefined{rd}{%
  \newcommand{\rd}{\textsuperscript{\textup{rd}}\xspace}
}{}
\@ifundefined{nd}{%
  \newcommand{\nd}{\textsuperscript{\textup{nd}}\xspace}
}{}
\makeatother

\renewcommand{\th}{\textsuperscript{\textup{th}}\xspace}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Incipit
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\includepdf{sources/TitlePage.pdf}

\begin{comment}
\makeatletter
\if@twoside % commands below work only for twoside option of \documentclass
  \setlength{\textblockoffset}{12mm}
  \addtolength{\hoffset}{\textblockoffset}
  \addtolength{\evensidemargin}{-2.0\textblockoffset}
\fi
\makeatother
\end{comment}

\frontmatter

  \tableofcontents

\mainmatter

  \part[Introduction]{%
    Introduction\\
    %
    \vspace{1cm}
    %
    \begin{minipage}[l]{\textwidth}
    %
    \textnormal{%
      \normalsize
      %
      \begin{singlespace*}
        \onehalfspacing
        %
        You can also use parts in order to partition your great work
        into larger `chunks'. This involves some manual adjustments in
        terms of the layout, though.
      \end{singlespace*}
    }
    \end{minipage}
  }

  \include{sources/Introduction}

% This ensures that the subsequent sections are being included as root
% items in the bookmark structure of your PDF reader.
\bookmarksetup{startatroot}
\backmatter

  \begingroup
    \let\clearpage\relax
    \glsaddall
    \printglossary[type=\acronymtype]
    \newpage
    \printglossary
  \endgroup

  \printindex
  \printbibliography

\end{document}
