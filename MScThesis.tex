\documentclass{mimosis}

\usepackage{metalogo}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Some of my favourite personal adjustments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% These are the adjustments that I consider necessary for typesetting
% a nice thesis. However, they are *not* included in the template, as
% I do not want to force you to use them.

% This ensures that I am able to typeset bold font in table while still aligning the numbers
% correctly.
\usepackage{etoolbox}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Hyperlinks & bookmarks
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{hyperref}

\hypersetup{
  hidelinks,
  linktoc    = page,
  colorlinks = true,
  citecolor  = RoyalBlue,
  linkcolor  = RoyalBlue,
  urlcolor   = RoyalBlue,
  unicode = true, % for non-Latin characters in Acrobat’s bookmarks
  %bookmarks=true,  % show bookmarks bar?
  pdftoolbar=false,  % show Acrobat’s toolbar?
  pdfmenubar=true,  % show Acrobat’s menu?
  pdffitwindow=true,  % window fit to page when opened
  pdfstartview={FitH},  % fits the width of the page to the window
  pdfpagelayout={SinglePage},  % set visualization on single page
  pdftitle={3D U-Net Domain Generalization in Fetal Brain MRI Segmentation},  % title
  pdfauthor={Simone Chiarella},  % author
  pdfsubject={Fetal Brain MRI Segmentation},  % subject of the document
  pdfcreator={Simone Chiarella},  % creator of the document
  pdfproducer={Latekmk},  % producer of the document
  %pdfkeywords={keyword1, key2, key3}, % list of keywords
  pdfnewwindow=false,  % links in new PDF window
}

% >>> Make the page number in the table of contents a hyperlink
\makeatletter
\def\numberline#1{%
  \ifx\Hy@tocdestname\ltx@empty
    \hb@xt@\@tempdima{#1\hfill}%
  \else
  \hb@xt@\@tempdima{
    \hyper@linkstart{link}{\Hy@tocdestname}#1\hyper@linkend\hfill
  }%
 \fi
}
\makeatother
% <<<
\usepackage{bookmark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Bibliography
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% I like the bibliography to be extremely plain, showing only a numeric
% identifier and citing everything in simple brackets. The first names,
% if present, will be initialized. DOIs and URLs will be preserved.

\usepackage[%
  autocite     = plain,
  backend      = biber,
  doi          = true,
  url          = true,
  giveninits   = true,
  hyperref     = true,
  maxbibnames  = 4,  % customized
  maxcitenames = 4,  % customized
  sorting      = none,  % customized
  backref      = true,  % customized
  backrefstyle = two,  % customized
  style        = numeric,
]{biblatex}

\input{latex-mimosis/bibliography-mimosis}
\addbibresource{sources/Bibliography.bib}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Fonts
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ifxetexorluatex
  \usepackage{unicode-math}
  \setmainfont{EB Garamond}
  \setmathfont{Garamond Math}

  % Load some missing symbols from another font.
  \setmathfont{STIX Two Math}[%
    range = {
      \sharp,
      \natural,
      \flat,
      \clubsuit,
      \spadesuit,
      \checkmark,
    }
  ]
  \setmonofont[Scale=MatchLowercase]{Source Code Pro}
\else
  % >>> charter
  %\usepackage[bitstream-charter]{mathdesign}
  %\usepackage[scaled=0.92]{helvet}
  %\usepackage{courier}
  %\usepackage[T1]{fontenc}
  % <<<
  \usepackage[lf]{libertinus-type1}  % ebgaramond  % bch
  \usepackage[oldstyle, scale=0.9]{sourcecodepro}
  \singlespacing
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Glossaries and acronyms
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newacronym[description={Brainstem}]{BS}{BS}{brainstem}
\newacronym[description={Centre Hospitalier Universitaire Vaudois (Lausanne University Hospital)}]{CHUV}{CHUV}{centre hospitalier universitaire vaudois}
\newacronym[description={Cerebrospinal fluid}]{CSF}{CSF}{cerebrospinal fluid}
\newacronym[description={Contrast-to-noise ratio}]{CNR}{CNR}{contrast-to-noise ratio}
\newacronym[description={Cortical gray matter}]{cGM}{cGM}{cortical gray matter}
\newacronym[description={Data augmentation}]{DA}{DA}{data augmentation}
\newacronym[description={Domain generalization}]{DG}{DG}{domain generalization}
\newacronym[description={Deep gray matter}]{dGM}{dGM}{deep gray matter}
\newacronym[description={Dice similarity coefficient}]{DSC}{DSC}{Dice similarity coefficient}
\newacronym[description={Fetal Tissue Annotation Challenge}]{FeTA}{FeTA}{fetal tissue annotation challenge}
\newacronym[description={Field of view}]{FOV}{FOV}{field of view}
\newacronym[description={Hausdorff 95 distance}]{HD95}{HD95}{Hausdorff 95 distance}
\newacronym[description={Gestational age}]{GA}{GA}{gestational age}
\newacronym[description={Gray matter}]{GM}{GM}{gray matter}
\newacronym[description={King's College London (St.\ Thomas Hospital)}]{KCL}{KCL}{King's College London}
\newacronym[description={Universitäts-Kinderspital Zürich (Zurich University Children's Hospital)}]{Kispi}{Kispi}{Universitäts-Kinderspital Zürich}
\newacronym[description={Out-of-domain}]{OOD}{OOD}{out-of-domain}
\newacronym[description={Signal-to-noise ratio}]{SNR}{SNR}{signal-to-noise ratio}
\newacronym[description={Super-resolution}]{SR}{SR}{super-resolution}
\newacronym[description={Super-resolution reconstruction}]{SRR}{SRR}{super-resolution reconstruction}
\newacronym[description={Single-shot fast spin-echo}]{SSFSE}{SSFSE}{single-shot fast spin-echo}
\newacronym[description={Echo time}]{TE}{TE}{echo time}
\newacronym[description={Repetition time}]{TR}{TR}{repetition time}
\newacronym[description={University of California, San Francisco (Benioff Children's Hospital)}]{UCSF}{UCSF}{UC San Francisco}
\newacronym[description={Volume similarity}]{VS}{VS}{volume similarity}
\newacronym[description={White matter}]{WM}{WM}{white matter}

\comment{
  \newglossaryentry{LaTeX}{%
    name        = {\LaTeX},
    description = {A document preparation system},
    sort        = {LaTeX},
  }

  \newglossaryentry{Real numbers}{%
    name        = {$\real$},
    description = {The set of real numbers},
    sort        = {Real numbers},
  }
}

\makeindex
\makeglossaries

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Ordinals
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\makeatletter
\@ifundefined{st}{%
  \newcommand{\st}{\textsuperscript{\textup{st}}\xspace}
}{}
\@ifundefined{rd}{%
  \newcommand{\rd}{\textsuperscript{\textup{rd}}\xspace}
}{}
\@ifundefined{nd}{%
  \newcommand{\nd}{\textsuperscript{\textup{nd}}\xspace}
}{}
\makeatother

\renewcommand{\th}{\textsuperscript{\textup{th}}\xspace}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Incipit
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\includepdf[pages=-]{sources/TitlePage.pdf}

\comment{ % This is a hack to move the text block towards the outer border
  \makeatletter
  \if@twoside % commands below work only for twoside option of \documentclass
    \setlength{\textblockoffset}{12mm}
    \addtolength{\hoffset}{\textblockoffset}
    \addtolength{\evensidemargin}{-2.0\textblockoffset}
  \fi
  \makeatother
}

\frontmatter

  %\begin{dedication}
  %  A los cruces. // Agli incroci.
  %\end{dedication}
  \tableofcontents
  \listoffigures
  \listoftables

\mainmatter

  \include{sources/Summary}

  \part[Introduction]{%
    Introduction\\
    %
    \vspace{1cm}
    %
    \begin{minipage}[l]{\textwidth}
    %
    \textnormal{%
      \normalsize
      %
      \begin{singlespace*}
        \onehalfspacing
        %
        Type here the introduction to the part.
      \end{singlespace*}
    }
    \end{minipage}
  }

  \include{sources/MagneticResonanceImaging}

  \include{sources/FetalBrainMRI}

  \include{sources/TechniquesForFetalBrainSegmentation}

  \part[Materials and Methods]{%
    Materials and Methods\\
    %
    \vspace{1cm}
    %
    \begin{minipage}[l]{\textwidth}
    %
    \textnormal{%
      \normalsize
      %
      \begin{singlespace*}
        \onehalfspacing
        %
        Type here the introduction to the part.
      \end{singlespace*}
    }
    \end{minipage}
  }

  \include{sources/Data}
  
  \include{sources/Methods}

  \include{sources/ImplementationAndTrainingStrategy}

  \part[Results and Discussion]{%
    Results and Discussion\\
    %
    \vspace{1cm}
    %
    \begin{minipage}[l]{\textwidth}
    %
    \textnormal{%
      \normalsize
      %
      \begin{singlespace*}
        \onehalfspacing
        %
        Type here the introduction to the part.
      \end{singlespace*}
    }
    \end{minipage}
  }

  \include{sources/Results}

  \include{sources/Discussion}

  \include{sources/Conclusions}

% This ensures that the subsequent sections are being included as root
% items in the bookmark structure of your PDF reader.
\bookmarksetup{startatroot}
\backmatter

  \begingroup
    \let\clearpage\relax
    \glsaddall
    \printglossary[type=\acronymtype]
  \endgroup

  \printindex
  \printbibliography

  \appendix
  %\addtocontents{toc}{\protect\setcounter{tocdepth}{A}}
  \include{sources/AppendixA}

\end{document}
